<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Classic Games Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* --- Base styles --- */
    body {
      margin: 0; font-family: Arial, sans-serif; background: #f9fafb; color: #111827;
    }
    h1, h2, h3 { margin: 0; }
    a { color: inherit; text-decoration: none; }

    /* Layout */
    .container { display: grid; grid-template-columns: 250px 1fr; gap: 1rem; max-width: 1200px; margin: auto; padding: 1rem; }
    aside { background: white; padding: 1rem; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); height: fit-content; }
    main { display: flex; flex-direction: column; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit,minmax(250px,1fr)); gap: 1rem; }

    /* Cards */
    .card { background: white; border-radius: 12px; padding: 1rem; display: flex; flex-direction: column; justify-content: space-between; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .card-header { display: flex; justify-content: space-between; align-items: flex-start; }
    .fav-btn { border: none; background: #f3f4f6; border-radius: 6px; padding: 0.3rem 0.6rem; cursor: pointer; font-size: 1.2rem; }
    .fav-btn.active { background: #facc15; }
    .card-actions { margin-top: auto; display: flex; gap: 0.5rem; }
    .btn { flex: 1; padding: 0.4rem; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; background: #fff; }
    .btn:hover { background: #f3f4f6; }

    /* Sidebar */
    aside h2 { font-size: 1.2rem; margin-bottom: 0.5rem; }
    aside input, aside select, aside button { width: 100%; padding: 0.4rem; margin-top: 0.5rem; border: 1px solid #ddd; border-radius: 6px; }
    aside button { cursor: pointer; }

    /* Modal */
    .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: none; justify-content: center; align-items: center; }
    .modal.active { display: flex; }
    .modal-content { background: white; border-radius: 12px; width: 90%; max-width: 900px; height: 80vh; display: flex; flex-direction: column; overflow: hidden; }
    .modal-header, .modal-footer { padding: 0.5rem; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
    .modal-footer { border-top: 1px solid #eee; border-bottom: none; }
    iframe { flex: 1; border: none; }

    @media(max-width: 768px) {
      .container { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <aside>
      <h2>Classic Games Portal</h2>
      <p style="font-size: 0.9rem; color:#555;">Authentic browser builds & open-source clones</p>

      <input type="text" id="search" placeholder="Search games...">
      <select id="filter">
        <option value="all">All</option>
        <option value="puzzle">Puzzle</option>
        <option value="arcade">Arcade</option>
        <option value="favorites">Favorites</option>
      </select>

      <button id="clearFavs">Clear favorites</button>
    </aside>

    <!-- Main -->
    <main>
      <div style="margin-bottom:1rem; display:flex; justify-content:space-between; align-items:center;">
        <div>
          <h1>Games & Puzzles</h1>
          <p style="font-size:0.9rem;color:#555;">Authentic playable ports and open-source replicas</p>
        </div>
        <div id="total"></div>
      </div>
      <div class="grid" id="gameGrid"></div>
    </main>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <div class="modal-header">
        <div><strong id="modalTitle"></strong></div>
        <div>
          <button id="copyLink">Copy Link</button>
          <button id="closeModal">Close</button>
        </div>
      </div>
      <iframe id="gameFrame"></iframe>
      <div class="modal-footer" style="font-size:0.8rem;color:#555;">Tip: Host open-source builds locally for best reliability.</div>
    </div>
  </div>

  <script>
    // --- Sample games --- //
    const games = [
      { id:"2048", title:"2048 (Classic)", author:"Gabriele Cirulli", type:"puzzle", src:"https://gabrielecirulli.github.io/2048/", license:"MIT", notes:"Open-source JavaScript implementation." },
      { id:"tetris", title:"Tetris (JS Clone)", author:"Open-source clone", type:"puzzle", src:"https://fogleman.github.io/tetris/", license:"MIT-like", notes:"JS implementation of Tetris." },
      { id:"snake", title:"Snake (JS)", author:"Community clone", type:"arcade", src:"https://playsnake.org/", license:"Site-specific", notes:"Replace with open-source variant." }
    ];

    // --- State --- //
    let favorites = JSON.parse(localStorage.getItem("cg_favs")||"[]");

    // Elements
    const gameGrid = document.getElementById("gameGrid");
    const totalEl = document.getElementById("total");
    const searchEl = document.getElementById("search");
    const filterEl = document.getElementById("filter");
    const clearFavsBtn = document.getElementById("clearFavs");

    const modal = document.getElementById("modal");
    const modalTitle = document.getElementById("modalTitle");
    const gameFrame = document.getElementById("gameFrame");
    const closeModalBtn = document.getElementById("closeModal");
    const copyLinkBtn = document.getElementById("copyLink");

    // Render
    function render() {
      const query = searchEl.value.toLowerCase();
      const filter = filterEl.value;
      const filtered = games.filter(g => {
        const matchesQ = (g.title+" "+g.author).toLowerCase().includes(query);
        const matchesF = filter==="all" ? true : (filter==="favorites" ? favorites.includes(g.id) : g.type===filter);
        return matchesQ && matchesF;
      });

      totalEl.textContent = `Total: ${filtered.length}`;
      gameGrid.innerHTML = "";
      if (!filtered.length) {
        gameGrid.innerHTML = `<div style="grid-column:1/-1;text-align:center;color:#555;">No games matched.</div>`;
        return;
      }

      filtered.forEach(g => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <div class="card-header">
            <div>
              <h3>${g.title}</h3>
              <p style="font-size:0.8rem;color:#666;">${g.author}</p>
            </div>
            <button class="fav-btn ${favorites.includes(g.id)?"active":""}">${favorites.includes(g.id)?"★":"☆"}</button>
          </div>
          <p style="font-size:0.9rem;color:#555;margin:0.5rem 0;">${g.notes}</p>
          <div class="card-actions">
            <button class="btn playBtn">Play</button>
            <a href="${g.src}" target="_blank" class="btn" style="flex:0;">New Tab</a>
          </div>
          <div style="font-size:0.7rem;color:#888;margin-top:0.5rem;">License: ${g.license}</div>
        `;

        // favorite button
        card.querySelector(".fav-btn").onclick = () => {
          if (favorites.includes(g.id)) {
            favorites = favorites.filter(x=>x!==g.id);
          } else {
            favorites.push(g.id);
          }
          localStorage.setItem("cg_favs", JSON.stringify(favorites));
          render();
        };

        // play button
        card.querySelector(".playBtn").onclick = () => openGame(g);

        gameGrid.appendChild(card);
      });
    }

    function openGame(game) {
      modal.classList.add("active");
      modalTitle.textContent = game.title;
      gameFrame.src = game.src;
      copyLinkBtn.onclick = () => { navigator.clipboard.writeText(game.src); alert("Game link copied"); };
    }
    function closeGame() {
      modal.classList.remove("active");
      gameFrame.src = "about:blank";
    }

    // Events
    searchEl.oninput = render;
    filterEl.onchange = render;
    clearFavsBtn.onclick = ()=>{favorites=[];localStorage.removeItem("cg_favs");render();};
    closeModalBtn.onclick = closeGame;
    modal.onclick = (e)=>{ if (e.target===modal) closeGame(); };

    // Init
    render();
  </script>
</body>
</html>
